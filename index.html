<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
        
    <script type="text/javascript" src="calc.js"></script>
    <!-- <script src="jquery-3.6.0.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- <link rel="shortcut icon" href="rf.png" type="image/x-icon"> -->
    <link rel="shortcut icon" href="rf.ico" type="image/x-icon">
    <title>RF Simulation Tool</title>
</head>
<body>
    <script>
        
        let p1,p2;
        let last_selected=0;
        let comp_num=0;
        let select_id;
        let cl=0;
        let prev_top='200px'; let prev_right='100px';
        let input_pin = 0;
        let output_arr = []

        
        // const onClick = (event) => {
        //     select_id = event.srcElement.id;
        //     // console.log(select_id)
        // }
        // edit.addEventListener('click', onClick);
        const getId = (id) => {
            select_id = parseInt(id);
            if (output_arr[select_id][0] === 2) {
                document.getElementById('edeplane').style.display='block';

            } else if (output_arr[select_id][0] === 3) {
                document.getElementById('edhplane').style.display='block';

            } else {
                document.getElementById('edwave').style.display='block';
            }
            let body = document.getElementById('nb');
            body.classList.add('popup');

            console.log(select_id)
        }


        let eplanetee_edit_calc =(z1,z2,pin) => {
            console.log(z1,z2,pin)
            if(isNaN(z1) || isNaN(z2) || isNaN(pin)) {
                window.alert('Enter all values')
            
            } else {
                var canvas = document.getElementById('canvas');

                console.log(pin)
                let rho1 = (z1-50)/(z1+50);
                let rho2 = (z2-50)/(z2+50);
                p1 = (pin/2)*(1-Math.pow(rho1,2));
                p2 = (pin/2)*(1-Math.pow(rho2,2));
                
                output=document.getElementById('output');
                output.innerHTML='<p id="output-ans1">P1=' + String(p1) + 'W</p><p id="output-ans2">P2=' + String(p2) + 'W</p>';
                document.getElementById('ei').style.display='none';
                document.getElementById('eaw').style.display='none';
                document.getElementById('eae').style.display='none';
                last_selected=2;
                let arr=[last_selected,pin,z1,z2,p1,p2]
                output_arr.push(arr)
                var body = document.getElementById('nb');
                body.classList.remove('popup')
        }
    }

        let hplanetee_edit_calc = (z1,z2,pin) => {
            if(isNaN(z1) || isNaN(z2) || isNaN(pin)) {
                window.alert('Enter all values')
            
            } else {
                var canvas = document.getElementById('canvas');

                let rho1 = (z1-50)/(z1+50);
                let rho2 = (z2-50)/(z2+50);
                p1 = (pin/2)*(1-Math.pow(rho1,2));
                p2 = (pin/2)*(1-Math.pow(rho2,2));
                
                console.log(pin)
                console.log(rho1,rho2)
                console.log(p1,p2)
                output=document.getElementById('output');
                output.innerHTML='<p id="output-ans1">P1=' + String(p1) + 'W</p><p id="output-ans2">P2=' + String(p2) + 'W</p>';
                document.getElementById('hi').style.display='none';
                document.getElementById('haw').style.display='none';
                document.getElementById('hah').style.display='none';
                last_selected=3;
                let arr=[last_selected,pin,z1,z2,p1,p2]
                output_arr.push(arr)
                var body = document.getElementById('nb');
                body.classList.remove('popup')
            }
        }

        let waveguide_edit_calc = (pin,il) => {
            if(isNaN(il) || isNaN(pin)) {
                window.alert('Enter all values')
            
            } else {
                var canvas = document.getElementById('canvas');

                console.log(pin)
                console.log(il)
                p1 = pin*(Math.pow(10,(-il/10)))
                output=document.getElementById('output');
                output.innerHTML='<p id="output-ans1">P1=' + String(p1) + 'W</p>';
                document.getElementById('wi').style.display='none';
                document.getElementById('waw').style.display='none';
                document.getElementById('wae').style.display='none';
                last_selected=1;
                let arr=[last_selected,pin,il,p1]
                output_arr.push(arr)
                console.log(output_arr);
                // var body = document.body;
                // body.classList.remove('popup');
                var body = document.getElementById('nb');
                body.classList.remove('popup')
            }
        }
        

        let eplanetee_calc = (z1,z2,pin) => {
            console.log(z1,z2,pin)
            if(isNaN(z1) || isNaN(z2) || isNaN(pin)) {
                window.alert('Enter all values')
            
            } else {
                var canvas = document.getElementById('canvas');

                console.log(pin)
                let rho1 = (z1-50)/(z1+50);
                let rho2 = (z2-50)/(z2+50);
                p1 = (pin/2)*(1-Math.pow(rho1,2));
                p2 = (pin/2)*(1-Math.pow(rho2,2));
                
                output=document.getElementById('output');
                output.innerHTML='<p id="output-ans1">P1=' + String(p1) + 'W</p><p id="output-ans2">P2=' + String(p2) + 'W</p>';
                document.getElementById('ei').style.display='none';
                document.getElementById('eaw').style.display='none';
                document.getElementById('eae').style.display='none';
                last_selected=2;
                let arr=[last_selected,pin,z1,z2,p1,p2]
                output_arr.push(arr)

                if (comp_num===1) {
                    canvas.innerHTML+='<div class="powerin" id="powerin" style="top:'+ prev_top +';left:'+ prev_right + '" onmouseover="hover_effect(this.id)" onmouseout="normal_effect()"><div class="circle">Pin</div><div class="line"></div></div>'
                    prev_top = document.getElementById('powerin').style.top;
                    console.log(prev_top)
                    let comp_width = 80;
                    let comp_left = document.getElementById('powerin').style.left
                    prev_right = String(comp_width+parseInt(comp_left.match(/(\d+)/))) + 'px';
                }

                if (input_pin===1) {
                    prev_top = String(parseInt(prev_top.match(/(\d+)/)) - 15) + 'px'
                }
                else if (input_pin===2) {
                    prev_top = String(parseInt(prev_top.match(/(\d+)/)) + 15) + 'px'
                    
                }

                canvas.innerHTML+='<div class="eplanetee" id="' + comp_num + 'ele" style="top:'+ prev_top +';left:'+ prev_right + '" onmouseover="hover_effect(this.id)" onmouseout="normal_effect()"><div class="line"></div><div class="circle">E</div><div class="op"><div class="opline top"></div><div class="opline bottom"></div></div></div>'

                prev_top = document.getElementById(comp_num+'ele').style.top;
                let comp_width = 110;
                let comp_left = document.getElementById(comp_num+'ele').style.left
                prev_right = String(comp_width+parseInt(comp_left.match(/(\d+)/))) + 'px';

                console.log(prev_top)
                console.log(prev_right)

                var body = document.getElementById('nb');
                body.classList.remove('popup')

            }
            // alert(output_arr)

        }

        let select_ip_eplane_wave = (pin,il) => {
            // eplanetee_calc(z1,z2,pin)
            // console.log(pin)
            let pin_value;
            for(var i = 0; i < pin.length; i++){
                if(pin[i].checked){
                    pin_value = pin[i].value;
                }
            }
            console.log(pin_value)
            if (pin_value==='1') {
                console.log(p1)
                input_pin =1;
                waveguide_calc(p1,il)
                
            }
            else if(pin_value==='2'){
                console.log(p2)
                input_pin=2;
                waveguide_calc(p2,il)
            } else {
                waveguide_calc(NaN,il)
            }
            input_pin=0;

            
        }

        let select_ip_eplane_eplane = (pin,z1,z2) => {
            let pin_value;
            for(var i = 0; i < pin.length; i++){
                if(pin[i].checked){
                    pin_value = pin[i].value;
                }
            }
            console.log(pin_value)
            if (pin_value==='1') {
                console.log(p1)
                input_pin=1
                // waveguide_calc(p1,il)
                eplanetee_calc(z1,z2,p1)
            }
            else if(pin_value==='2'){
                console.log(p2)
                input_pin=2
                // waveguide_calc(p2,il)
                eplanetee_calc(z1,z2,p2)

            } else {
                eplanetee_calc(z1,z2,NaN)
            }
            input_pin=0;


            
        }

        let select_ip_hplane_hplane = (pin,z1,z2) => {
            let pin_value;
            for(var i = 0; i < pin.length; i++){
                if(pin[i].checked){
                    pin_value = pin[i].value;
                }
            }
            console.log(pin_value)
            if (pin_value==='1') {
                console.log(p1)
                input_pin=1;

                // waveguide_calc(p1,il)
                hplanetee_calc(z1,z2,p1)
            }
            else if(pin_value==='2'){
                input_pin=2;

                console.log(p2)
                // waveguide_calc(p2,il)
                hplanetee_calc(z1,z2,p2)
            } else {
                hplanetee_calc(z1,z2,NaN)
            }
            input_pin=0;

            
        }

        let hplanetee_calc = (z1,z2,pin) => {
            if(isNaN(z1) || isNaN(z2) || isNaN(pin)) {
                window.alert('Enter all values')
            
            } else {
                var canvas = document.getElementById('canvas');

                let rho1 = (z1-50)/(z1+50);
                let rho2 = (z2-50)/(z2+50);
                p1 = (pin/2)*(1-Math.pow(rho1,2));
                p2 = (pin/2)*(1-Math.pow(rho2,2));
                
                console.log(pin)
                console.log(rho1,rho2)
                console.log(p1,p2)
                output=document.getElementById('output');
                output.innerHTML='<p id="output-ans1">P1=' + String(p1) + 'W</p><p id="output-ans2">P2=' + String(p2) + 'W</p>';
                document.getElementById('hi').style.display='none';
                document.getElementById('haw').style.display='none';
                document.getElementById('hah').style.display='none';
                last_selected=3;
                let arr=[last_selected,pin,z1,z2,p1,p2]
                output_arr.push(arr)
                console.log(output_arr)
                if (comp_num===1) {
                    canvas.innerHTML+='<div class="powerin" id="powerin" style="top:'+ prev_top +';left:'+ prev_right + '" onmouseover="hover_effect(this.id)" onmouseout="normal_effect()"><div class="circle">Pin</div><div class="line"></div></div>'
                    prev_top = document.getElementById('powerin').style.top;
                    let comp_width = 80;
                    let comp_left = document.getElementById('powerin').style.left
                    prev_right = String(comp_width+parseInt(comp_left.match(/(\d+)/))) + 'px';
                }
                if (input_pin===1) {
                    prev_top = String(parseInt(prev_top.match(/(\d+)/)) - 15) + 'px'
                }
                else if (input_pin===2) {
                    prev_top = String(parseInt(prev_top.match(/(\d+)/)) + 15) + 'px'
                    
                }
                canvas.innerHTML+='<div class="hplanetee" id="' + comp_num + 'ele" style="top:'+ prev_top +';left:'+ prev_right + '" onmouseover="hover_effect(this.id)" onmouseout="normal_effect()"><div class="line"></div><div class="square">H</div><div class="op"><div class="opline top"></div><div class="opline bottom"></div></div></div>'
                prev_top = document.getElementById(comp_num+'ele').style.top;
                let comp_width = 110;
                let comp_left = document.getElementById(comp_num+'ele').style.left
                prev_right = String(comp_width+parseInt(comp_left.match(/(\d+)/))) + 'px';
                console.log(prev_top)
                console.log(prev_right)
                var body = document.getElementById('nb');
                body.classList.remove('popup')
            }

        }

        let waveguide_calc = (pin,il) => {
            if(isNaN(il) || isNaN(pin)) {
                window.alert('Enter all values')
            
            } else {
                var canvas = document.getElementById('canvas');

                console.log(pin)
                console.log(il)
                p1 = pin*(Math.pow(10,(-il/10)))
                output=document.getElementById('output');
                output.innerHTML='<p id="output-ans1">P1=' + String(p1) + 'W</p>';
                document.getElementById('wi').style.display='none';
                document.getElementById('waw').style.display='none';
                document.getElementById('wae').style.display='none';
                last_selected=1;
                let arr=[last_selected,pin,il,p1]
                output_arr.push(arr)
                console.log(output_arr)
                if (comp_num===1) {
                    canvas.innerHTML+='<div class="powerin" id="powerin" style="top:'+ prev_top +';left:'+ prev_right + '" onmouseover="hover_effect(this.id)" onmouseout="normal_effect()"><div class="circle">Pin</div><div class="line"></div></div>'
                    prev_top = document.getElementById('powerin').style.top;
                    let comp_width = 80;
                    let comp_left = document.getElementById('powerin').style.left
                    prev_right = String(comp_width+parseInt(comp_left.match(/(\d+)/))) + 'px';
                }
                if (input_pin===1) {
                    prev_top = String(parseInt(prev_top.match(/(\d+)/)) - 15) + 'px'
                }
                else if (input_pin===2) {
                    prev_top = String(parseInt(prev_top.match(/(\d+)/)) + 15) + 'px'
                    
                }
                canvas.innerHTML+='<div class="waveguide" id="' + comp_num + 'ele" style="top:'+ prev_top +';left:'+ prev_right + '" onmouseover="hover_effect(this.id)" onmouseout="normal_effect()"><div class="line"></div><div class="rectangle">W</div><div class="line" ></div></div>';
                prev_top = document.getElementById(comp_num+'ele').style.top;
                let comp_width = 260;
                let comp_left = document.getElementById(comp_num+'ele').style.left
                prev_right = String(comp_width+parseInt(comp_left.match(/(\d+)/))) + 'px';
                console.log(prev_top)
                console.log(prev_right)
                var body = document.getElementById('nb');
                body.classList.remove('popup')

            }
        }

        let edit_output_eplane = (z1,z2) => {
            // let i;
            if (isNaN(z1) || isNaN(z2)) {
                window.alert('Enter all values')
            } else {
            let old_eplane = output_arr[select_id];
            console.log(old_eplane)
            let t1 = old_eplane[4]; let t2 = old_eplane[5];
            if (select_id != 0) {
                let new_pin = output_arr[select_id][1];
                console.log(new_pin)
                output_arr.splice(select_id,1);
                console.log(output_arr)
                
                eplanetee_edit_calc(z1,z2,new_pin);

                // prev_ele = output_arr[]
            }else {
                let new_pin = output_arr[0][1];
                output_arr.splice(0,1)
                eplanetee_edit_calc(z1,z2,new_pin);
            }
            // console.log(select_id+1, output_arr.length)
            let i = select_id;
            for (let count=select_id+1;count<output_arr.length;count++){
                // console.log('hi')
                let curr_ele = output_arr[i];
                if (curr_ele[0]===1) {
                    // waveguide_calc
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3) {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(select_id,1);
                            waveguide_edit_calc(output_arr[output_arr.length-1][4], curr_ele[2])
                        } else {
                            output_arr.splice(select_id,1);
                            waveguide_edit_calc(output_arr[output_arr.length-1][5], curr_ele[2])
                        }
                    } else {
                        output_arr.splice(select_id,1)
                        waveguide_edit_calc(output_arr[output_arr.length-1][3],curr_ele[2]);
                    }
                    
                    
                    // if (curr_ele[1]===t1){
                    //     waveguide_calc(output_arr[-1][])
                    // }
                }else if (curr_ele[0]===2){
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3)  {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(select_id,1);
                            eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][4])
                        } else {
                            output_arr.splice(select_id,1);
                            eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][5])
                        }

                    } else {
                        output_arr.splice(select_id,1);
                        eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][3]);
                    }
                    t1 = output_arr[output_arr.length-1][4];
                    t1 = output_arr[output_arr.length-1][5];       

                } else {
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3)  {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(i,1);
                            hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][4])
                        } else {
                            output_arr.splice(i,1);
                            hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][5])
                        }

                    } else {
                        output_arr.splice(i,1);
                        hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][3]);
                    }
                    t1 = output_arr[output_arr.length-1][4];
                    t1 = output_arr[output_arr.length-1][5];
                }
            } 
            document.getElementById('edeplane').style.display="none";
            console.log(output_arr)

        }
    }

        let edit_output_hplane = (z1,z2) => {
            // let i;
            if (isNaN(z1) || isNaN(z2)) {
                window.alert('Enter all values')
            }
            else {
            console.log(output_arr)
            let old_hplane = output_arr[select_id];
            console.log(old_hplane)
            let t1 = old_hplane[4]; let t2 = old_hplane[5];
            if (select_id != 0) {
                let new_pin = output_arr[select_id][1];
                console.log(new_pin)
                output_arr.splice(select_id,1);
                console.log(output_arr)
                
                hplanetee_edit_calc(z1,z2,new_pin);

                // prev_ele = output_arr[]
            }else {
                let new_pin = output_arr[0][1];
                output_arr.splice(0,1)
                hplanetee_edit_calc(z1,z2,new_pin);
            }
            // console.log(select_id+1, output_arr.length)
            let i = select_id;
            for (let count=select_id+1;count<output_arr.length;count++){
                // console.log('hi')
                let curr_ele = output_arr[i];
                if (curr_ele[0]===1) {
                    // waveguide_calc
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3) {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(select_id,1);
                            waveguide_edit_calc(output_arr[output_arr.length-1][4], curr_ele[2])
                        } else {
                            output_arr.splice(select_id,1);
                            waveguide_edit_calc(output_arr[output_arr.length-1][5], curr_ele[2])
                        }
                    } else {
                        output_arr.splice(select_id,1)
                        waveguide_edit_calc(output_arr[output_arr.length-1][3],curr_ele[2]);
                    }
                    
                    
                    // if (curr_ele[1]===t1){
                    //     waveguide_calc(output_arr[-1][])
                    // }
                }else if (curr_ele[0]===2){
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3)  {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(select_id,1);
                            eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][4])
                        } else {
                            output_arr.splice(select_id,1);
                            eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][5])
                        }

                    } else {
                        output_arr.splice(select_id,1);
                        eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][3]);
                    }
                    t1 = output_arr[output_arr.length-1][4];
                    t1 = output_arr[output_arr.length-1][5];       

                } else {
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3)  {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(i,1);
                            hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][4])
                        } else {
                            output_arr.splice(i,1);
                            hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][5])
                        }

                    } else {
                        output_arr.splice(i,1);
                        hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][3]);
                    }
                    t1 = output_arr[output_arr.length-1][4];
                    t1 = output_arr[output_arr.length-1][5];
                }
            } 
            document.getElementById('edhplane').style.display="none";
            console.log(output_arr)

        }
    }

        let edit_output_waveguide = (il) => {
            if (isNaN(il)) {
                window.alert("Enter all values")
            }else {
            let old_wave = output_arr[select_id];
            let t1; let t2;
            // if (select_id!=0) {
                let new_pin = output_arr[select_id][1];
                output_arr.splice(select_id,1);
                waveguide_edit_calc(new_pin,il);
            // }
            let i = select_id;
            for (let count=select_id+1;count<output_arr.length;count++){
                // console.log('hi')
                let curr_ele = output_arr[i];
                if (curr_ele[0]===1) {
                    // waveguide_edit_calc
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3) {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(select_id,1);
                            waveguide_edit_calc(output_arr[output_arr.length-1][4], curr_ele[2])
                        } else {
                            output_arr.splice(select_id,1);
                            waveguide_edit_calc(output_arr[output_arr.length-1][5], curr_ele[2])
                        }
                    } else {
                        output_arr.splice(select_id,1)
                        waveguide_edit_calc(output_arr[output_arr.length-1][3],curr_ele[2]);
                    }
                    
                    
                    // if (curr_ele[1]===t1){
                    //     waveguide_calc(output_arr[-1][])
                    // }
                }else if (curr_ele[0]===2){
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3)  {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(select_id,1);
                            eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][4])
                        } else {
                            output_arr.splice(select_id,1);
                            eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][5])
                        }

                    } else {
                        output_arr.splice(select_id,1);
                        eplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][3]);
                    }
                    t1 = output_arr[output_arr.length-1][4];
                    t1 = output_arr[output_arr.length-1][5];       

                } else {
                    if (output_arr[output_arr.length-1][0]===2 || output_arr[output_arr.length-1][0]===3)  {
                        if (curr_ele[1]===t1) {
                            output_arr.splice(i,1);
                            hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][4])
                        } else {
                            output_arr.splice(i,1);
                            hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][5])
                        }

                    } else {
                        output_arr.splice(i,1);
                        hplanetee_edit_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][3]);
                    }
                    t1 = output_arr[output_arr.length-1][4];
                    t1 = output_arr[output_arr.length-1][5];
                }
            } 
            document.getElementById('edwave').style.display="none";
            console.log(output_arr)

        }
    }


        let hover_effect = (id) => {
            // let ele = document.getElementById(id);
            let output = document.getElementById('output');

            if (id==='powerin') {
                console.log(id)
                let ans = output_arr[0]
                console.log(ans)
                innerStr = '<p>Initial Power Input</p><p>Pin=' + ans[1] + 'W</p>'
                output.innerHTML = '<p>Initial Power Input</p><p>Pin=' + ans[1] + 'W</p>';

            } else {
            let i1 = id.replace('ele','');
            let index = parseInt(i1);
            console.log(index)
            // document.getElementById('output-ans1').style.display='none';
            // document.getElementById('output-ans2').style.display='none';
            let ans=output_arr[index-1];
            if(ans[0]===2) {
                output.innerHTML = '<p>E Plane Tee</p><p>Pin=' + ans[1] + 'W</p><p>Z1='+ans[2]+'&#8486</p><p>Z2='+ans[3]+'&#8486</p><p>P1='+ans[4]+'W</p><p>P2='+ans[5]+'W</p>'
            } else if(ans[0]===3) {
                output.innerHTML = '<p>H Plane Tee</p><p>Pin=' + ans[1] + 'W</p><p>Z1='+ans[2]+'&#8486</p><p>Z2='+ans[3]+'&#8486</p><p>P1='+ans[4]+'W</p><p>P2='+ans[5]+'W</p>'

            } else {
                output.innerHTML = '<p>Waveguide</p><p>Pin=' + ans[1] + 'W</p><p>Insertion Loss='+ans[2]+'dB</p><p>Pout='+ans[3]+'W</p>'

            }
        }
    }

        let normal_effect = () => {
            let final_ans = output_arr[output_arr.length-1];
            let output = document.getElementById('output');
            if(final_ans[0]===2 || final_ans[0]===3) {
                output.innerHTML = '<p>Final Output</p><p>P1='+final_ans[4]+'W</p><p>P2='+final_ans[5]+'W</p>'
            }else {
                output.innerHTML = '<p>Final Output</p><p>Pout='+final_ans[3]+'W</p>'

            }
        }

        // let prev_last_selected = 0;

        // let close_form = () => {
        //     // console.log('hi')
        //     last_selected = prev_last_selected;
        //     cl =1;
        //     document.getElementById(String(comp_num-1)).style.display='none';
        //     document.getElementById('hi').style.display='none';
        //     document.getElementById('haw').style.display='none';
        //     document.getElementById('hah').style.display='none';
        //     document.getElementById('wi').style.display='none';
        //     document.getElementById('waw').style.display='none';
        //     document.getElementById('wae').style.display='none';
        //     document.getElementById('ei').style.display='none';
        //     document.getElementById('eaw').style.display='none';
        //     document.getElementById('eae').style.display='none';
        //     comp_num--;
        // }

        

    //     let delete_eplane = () => {
    //         document.getElementById(String(select_id)).style.display="none";
    //         // document.getElementById()
    //         document.getElementById(String(select_id)).style.display="none";
            
    //         let del_eplane = output_arr[select_id];
    //         output_arr.splice(select_id,1);
    //         let t1; let t2;
    //         let new_pin;
    //         if (select_id!=0) {
    //             let prev_ele = output_arr[select_id-1];
    //             if (prev_ele[0]===2 || prev_ele[0]===3) {
    //                 if (del_eplane[1] === prev_ele[4]) {
    //                     new_pin = prev_ele[4];
    //                 } else  {
    //                     new_pin = prev_ele[5];
    //                 }
    //             }  else {
    //                 new_pin = prev_ele[3];
    //             }
    //             if (output_arr[select_id][0]===2) {
    //                 t1=output_arr[select_id][4]; t2 = output_arr[select_id][5]
    //                 eplanetee_calc(output_arr[select_id][2],output_arr[select_id][3],new_pin)
    //                 output_arr.splice(select_id,1)
    //             } else if (output_arr[select_id][0]===3) {
    //                 t1=output_arr[select_id][4]; t2 = output_arr[select_id][5]
    //                 hplanetee_calc(output_arr[select_id][2],output_arr[select_id][3],new_pin)
    //                 output_arr.splice(select_id,1)
    //             } else {
    //                 waveguide_calc(new_pin,output_arr[select_id][2])
    //                 output_arr.splice(select_id,1)

    //             }
    //         }
    //         let i = select_id;
    //         for (let count=select_id+1; count<output_arr.length;count++) {
    //             let curr_ele = output_arr[select_id];
    //             if (curr_ele[0] ===2) {
    //                 if (output_arr[output_arr.length-1][0] === 2 || output_arr[output_arr.length-1][0] ===3) {
    //                     if (curr_ele[1]=== t1) {
    //                         output_arr.splice(i,1)
    //                         eplanetee_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][4])
    //                     } else {
    //                         output_arr.splice(i,1)
    //                         eplanetee_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][5])
    //                     }
    //                 } else {
    //                     output_arr.splice(i,1);
    //                     eplanetee_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][3])
    //                 }
    //                 t1 = curr_ele[4];t2=curr_ele[5];
    //             } else if (curr_ele[0] ===3) {
    //                 if (output_arr[output_arr.length-1][0] === 2 || output_arr[output_arr.length-1][0] ===3) {
    //                     if (curr_ele[1]=== t1) {
    //                         output_arr.splice(i,1)
    //                         hplanetee_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][4])
    //                     } else {
    //                         output_arr.splice(i,1)
    //                         hplanetee_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][5])
    //                     }
    //                 } else {
    //                     output_arr.splice(i,1);
    //                     hplanetee_calc(curr_ele[2],curr_ele[3],output_arr[output_arr.length-1][3])
    //                 }
    //                 t1 = curr_ele[4];t2=curr_ele[5];
    //             } else {
    //                 if (output_arr[output_arr.length-1][0] === 2 || output_arr[output_arr.length-1][0] ===3) {
    //                     if (curr_ele[1]=== t1) {
    //                         output_arr.splice(i,1)
    //                         waveguide_calc(curr_ele[2],output_arr[output_arr.length-1][4])
    //                     } else {
    //                         output_arr.splice(i,1)
    //                         waveguide_calc(curr_ele[2],output_arr[output_arr.length-1][5])
    //                     }
    //                 } else {
    //                     output_arr.splice(i,1);
    //                     waveguide_calc(curr_ele[2],output_arr[output_arr.length-1][3])
    //             }
    //         }
    //     } 
    //     document.getElementById('edeplane').style.display="none";
    //     console.log(output_arr)
    // }


    
    
        

    </script>
    <!-- <div class="bground"></div> -->
    
    
    <div class="nav-bar" id="nb">
        <div class="nav-elements">
            <!-- <div class="drop file">
                <h3>File</h3>
                <div class="drop-content file-content">
                    <p>Export as Image</p>
                    <p>Save</p>
                    <p>Toggle Fullscreen</p>
                </div>
            </div> -->
            <div class="drop draw">
                <h3>Draw</h3>
                <div class="drop-content draw-content">
                    <p id="w" onclick="wave_call()">Waveguide</p>
                    <p id="e" onclick="eplane_call()">E Plane Tee</p>
                    <p id="h" onclick="hplane_call()">H Plane Tee</p>
                </div>
            </div>
            <div class="drop draw" id="editbox">
                <h3>Edit Components</h3>
                <div class="drop-content draw-content" id="edit">
                    
                </div>
            </div>
        </div>
    </div>
    <div class="canvas" id="canvas">
        <!-- <script type="text/javascript" src="calc.js">close_<br>();</script> -->
        <div class="wave-init form" id="wi" style="display: none;">
            <h2>Waveguide</h2>
            <input type="number" name="p1wi" id="p1wi" placeholder="Enter Input Power">
            <input type="number" name="ilwi" id="ilwi" placeholder="Enter Insertion Loss">
            <br><button onclick="waveguide_calc(parseInt(document.getElementById('p1wi').value),parseInt(document.getElementById('ilwi').value))">OK</button>
            <!-- <button class="close">Close</button> -->

        </div>
        <div class="wave-after-wave form" id="waw" style="display: none;">
            <h2>Waveguide</h2>
            <input type="number" name="ilwaw" id="ilwaw" placeholder="Enter Insertion Loss">
            <br><button onclick="waveguide_calc(p1,parseInt(document.getElementById('ilwaw').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->

        </div>
        <div class="wave-after-eplane form" id="wae" style="display: none;">
            <h2>Waveguide</h2>
            <input type="radio" name="p1wae" id="p1wae" value="1">P1
            <input type="radio" name="p1wae" id="p1wae" value="2">P2
            <input type="number" name="ilwae" id="ilwae" placeholder="Enter Insertion Loss">
            <br><button onclick="select_ip_eplane_wave(document.getElementsByName('p1wae'),parseInt(document.getElementById('ilwae').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->
        
        </div>
    <!-- <script src="calc.js"></script> -->

        <div class="eplane-init form" id="ei" style="display: none;">
            <h2>E Plane Tee</h2>
            <input type="number" name="p1ei" id="p1ei" placeholder="Enter Input Power">
            <input type="number" name="z1ei" id="z1ei" placeholder="Enter Z1">
            <input type="number" name="z2ei" id="z2ei" placeholder="Enter Z2">
            <br><button onclick="eplanetee_calc(parseInt(document.getElementById('z1ei').value),parseInt(document.getElementById('z2ei').value),parseInt(document.getElementById('p1ei').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->
            <!-- <button class="close">Close</button> -->

        
        </div>
       
        <div class="hplane-init form" id="hi" style="display: none;">
            <h2>H Plane Tee</h2>
            <input type="number" name="p1hi" id="p1hi" placeholder="Enter Input Power">
            <input type="number" name="z1hi" id="z1hi" placeholder="Enter Z1">
            <input type="number" name="z2hi" id="z2hi" placeholder="Enter Z2">
            <br><button onclick="hplanetee_calc(parseInt(document.getElementById('z1hi').value),parseInt(document.getElementById('z2hi').value),parseInt(document.getElementById('p1hi').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->

        </div>
        <div class="eplane-after-eplane form" id="eae" style="display: none;">
            <h2>E Plane Tee</h2>
            <input type="radio" name="p1eae" id="p1eae" value="1">P1
            <input type="radio" name="p1eae" id="p1eae" value="2">P2
            <input type="number" name="z1eae" id="z1eae" placeholder="Enter Z1">
            <input type="number" name="z2eae" id="z2eae" placeholder="Enter Z2">
            <br><button onclick="select_ip_eplane_eplane(document.getElementsByName('p1eae'),parseInt(document.getElementById('z1eae').value),parseInt(document.getElementById('z2eae').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->
        
        </div>
        <div class="hplane-after-hplane form" id="hah" style="display: none;">
            <h2>H Plane Tee</h2>
            <input type="radio" name="p1hah" id="p1hah" value="1">P1
            <input type="radio" name="p1hah" id="p1hah" value="2">P2
            <input type="number" name="z1hah" id="z1hah" placeholder="Enter Z1">
            <input type="number" name="z2hah" id="z2hah" placeholder="Enter Z2">
            <br><button onclick="select_ip_hplane_hplane(document.getElementsByName('p1hah'),parseInt(document.getElementById('z1hah').value),parseInt(document.getElementById('z2hah').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->

        </div>
        <div class="eplane-after-wave form" id="eaw" style="display: none;">
            <h2>E Plane Tee</h2>
            <input type="number" name="z1eaw" id="z1eaw" placeholder="Enter Z1">
            <input type="number" name="z2eaw" id="z2eaw" placeholder="Enter Z2">
            <br><button onclick="eplanetee_calc(parseInt(document.getElementById('z1eaw').value),parseInt(document.getElementById('z2eaw').value),p1)">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->

        </div>
        <div class="hplane-after-wave form" id="haw" style="display: none;">
            <h2>H Plane Tee</h2>
            <input type="number" name="z1haw" id="z1haw" placeholder="Enter Z1">
            <input type="number" name="z2haw" id="z2haw" placeholder="Enter Z2">
            <br><button onclick="hplanetee_calc(parseInt(document.getElementById('z1haw').value),parseInt(document.getElementById('z2haw').value),p1)">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->

        </div>

        <div class="edit-eplane form" id="edeplane" style="display: none;">
            <h2>Edit E Plane Tee</h2>
            <input type="number" name="z1edep" id="z1edep" placeholder="Enter Z1">
            <input type="number" name="z2edep" id="z2edep" placeholder="Enter Z2">
            <!-- <button onclick="delete_eplane()">Delete</button> -->
           <br> <button onclick="edit_output_eplane(parseInt(document.getElementById('z1edep').value),parseInt(document.getElementById('z2edep').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->
       
        </div>

        <div class="edit-hplane form" id="edhplane" style="display: none;">
            <h2>Edit H Plane Tee</h2>
            <input type="number" name="z1edhp" id="z1edhp" placeholder="Enter Z1">
            <input type="number" name="z2edhp" id="z2edhp" placeholder="Enter Z2">
            <br><button onclick="edit_output_hplane(parseInt(document.getElementById('z1edhp').value),parseInt(document.getElementById('z2edhp').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->
       
        </div>

        <div class="edit-wave form" id="edwave" style="display: none;">
            <h2>Edit Waveguide</h2>
            <input type="number" name="iledwave" id="iledwave" placeholder="Enter Insertion Loss">
            <br><button onclick="edit_output_waveguide(parseInt(document.getElementById('iledwave').value))">OK</button>
            <!-- <button onclick="close_form()">Close</button> -->
        
        </div>


        <!-- <div class="waveguide" id="waveguide">
            <div class="line"></div>
            <div class="rectangle"></div>
            <div class="line"></div>
        </div> -->
        <!-- <div class="eplanetee" id="eplanetee">
            <div class="line"></div>
            <div class="circle"></div>
            <div class="op">
                <div class="opline top"></div>
                <div class="opline bottom"></div>
            </div>
        </div> -->
        <!-- <div class="hplanetee" id="hplanetee">
            <div class="line"></div>
            <div class="square"></div>
            <div class="op">
                <div class="opline top"></div>
                <div class="opline bottom"></div>
            </div>
        </div> -->
        <!-- <div class="powerin" id="powerin">
            <div class="circle">Pin</div>
            <div class="line"></div>
        </div> -->
        <div class="output" id="output">
            <!-- <p>P1= <script></script></p> -->
        </div>
    </div>
</body>
</html>